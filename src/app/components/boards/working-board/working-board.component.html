<div *ngIf="workingBoard" class="">


    <div>
        <div class="flex justify-start items-center gap-x-3 mb-5 ">

            <h1 class="text-lg sm:text-xl   text-slate-50 ">Tableau actuel / <span
                    class="font-semibold">{{workingBoard.name}}</span></h1>
        </div>

        <div class="relative  text-left flex justify-start gap-x-3 ">
            <div *ngIf="workingBoard.lists.length >0 " class="flex gap-3 ">
                <div *ngFor="let list of workingBoard.lists"
                    class="  gap-x-5 max-w-[100%]   justify-center sm:justify-start gap-y-5  ">
                    <div
                        class="relative min-w-[250px]  max-w-[250px] overflow-x-auto scrollbar-none flex-wrap p-3 rounded-md shadow bg-gray-800 border-gray-700 hover:bg-opacity-70 transition-all duration-500 ">

                        <div class="flex justify-between items-center border-b border-slate-50 mb-3 pb-3">
                            <h4 class="font-semibold">{{list.title}}</h4>
                            <svg (click)="onShowPopUp(list._id )" fill="#FFF" class="w-5 h-5  z-10 cursor-pointer"
                                viewBox="0 0 32 32" enable-background="new 0 0 32 32" id="Glyph" version="1.1"
                                xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink">
                                <path d="M16,13c-1.654,0-3,1.346-3,3s1.346,3,3,3s3-1.346,3-3S17.654,13,16,13z"
                                    id="XMLID_287_" />
                                <path d="M6,13c-1.654,0-3,1.346-3,3s1.346,3,3,3s3-1.346,3-3S7.654,13,6,13z"
                                    id="XMLID_289_" />
                                <path d="M26,13c-1.654,0-3,1.346-3,3s1.346,3,3,3s3-1.346,3-3S27.654,13,26,13z"
                                    id="XMLID_291_" />
                            </svg>
                        </div>

                        <!-- Afficher le popup seulement si l'ID du tableau correspond Ã  activePopupId -->
                        <div *ngIf="activePopupId === list._id"
                            class="absolute  top-10 -right-3 border border-solid border-gray-800 bg-gray-900 rounded-md z-10 text-[rgb(156 163 175)] min-w-[150px] transition-all duration-500 ">
                            <ul>
                                <li class=" hover:bg-gray-700 w-full transition-all duration-500 rounded-t-md ">
                                    <form>
                                        <input type="text" name="name" id="name"
                                            class="disable py-2 px-3 outline-none bg-gray-900 text-slate-50 h-full w-full text-lg "
                                            value="list.name" />
                                        <button type="submit"
                                            class="bg-blue-900 outline-none text-white py-2 px-3 hidden">Valider</button>
                                    </form>
                                </li>
                                <li
                                    class="py-2 px-3 hover:bg-gray-700 w-full transition-all duration-500   flex justify-start items-center gap-x-1 ">
                                    <span>
                                        <svg fill="rgb(255 255 255)" id="XMLID_298_" xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
                                            class="flex-shrink-0 w-4 h-4  transition duration-75  text-gray-400 group-hover:text-white">
                                            <g id="favorite">
                                                <path
                                                    d="M12,23.2l-0.6-0.5C8.7,20.7,0,13.5,0,7.3C0,3.8,2.9,1,6.5,1c2.2,0,4.3,1.1,5.5,2.9l0,0l0,0C13.2,2.1,15.3,1,17.5,1
                        C21.1,1,24,3.8,24,7.3c0,6.3-8.7,13.4-11.4,15.5L12,23.2z M6.5,2.9C4,2.9,2,4.8,2,7.2c0,4.1,5.1,9.5,10,13.4
                        c4.9-3.9,10-9.3,10-13.4c0-2.4-2-4.3-4.5-4.3c-1.6,0-3,0.8-3.8,2L12,7.6L10.3,5C9.5,3.7,8.1,2.9,6.5,2.9z" />
                                            </g>
                                        </svg>
                                    </span>
                                    <span>
                                        Ajouter aux favoris
                                    </span>
                                </li>
                                <li (click)="onDeleteList(list._id)"
                                    class="py-2 px-3 hover:bg-gray-700 w-full transition-all duration-500 flex justify-start items-center gap-x-1">
                                    <span>
                                        <svg class=" w-5 h-5" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path d="M10 11V17" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path d="M14 11V17" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path d="M4 7H20" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path
                                                d="M6 7H12H18V18C18 19.6569 16.6569 21 15 21H9C7.34315 21 6 19.6569 6 18V7Z"
                                                stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                            <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z"
                                                stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                        </svg>
                                    </span>
                                    Supprimer
                                </li>

                            </ul>
                        </div>

                        <div *ngIf="list.cards.length > 0">
                            <div *ngFor="let card of list.cards"
                                class="bg-gray-900 text-white my-3 p-3 rounded-md flex flex-col items-start  gap-y-2  ">
                                <div class="flex justify-start items-center gap-2">
                                    <span
                                        class="bg-green-500 text-blue-800 text-xs font-medium  py-0.5 rounded-full  w-[30px] h-[5px]">
                                    </span>
                                    <span
                                        class="bg-orange-400 text-blue-800 text-xs font-medium   py-0.5 rounded-full  w-[30px] h-[5px]">
                                    </span>
                                    <span
                                        class="bg-red-600 text-blue-800 text-xs font-medium  py-0.5 rounded-full  w-[30px] h-[5px]">
                                    </span>
                                </div>
                                <div>
                                    <p>{{card.title}}</p>
                                </div>
                                <div class="flex justify-start items-start gap-1  ">
                                    <svg class="w-4 h-4 " viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z"
                                            stroke="#FFF" stroke-width="1.5" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M12 6V12" stroke="#FFF" stroke-width="1.5" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M16.24 16.24L12 12" stroke="#FFF" stroke-width="1.5"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                    <span class="text-slate-50 text-[12px]">{{card.createdAt | date:"dd MMM"}}</span>
                                </div>
                            </div>
                        </div>




                        <div>

                            <div *ngIf="activeFormId !== list._id">
                                <div (click)="showForm(list._id)"
                                    class="cursor-pointer flex justify-start items-center gap-x-2">
                                    <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12.75 9C12.75 8.58579 12.4142 8.25 12 8.25C11.5858 8.25 11.25 8.58579 11.25 9L11.25 11.25H9C8.58579 11.25 8.25 11.5858 8.25 12C8.25 12.4142 8.58579 12.75 9 12.75H11.25V15C11.25 15.4142 11.5858 15.75 12 15.75C12.4142 15.75 12.75 15.4142 12.75 15L12.75 12.75H15C15.4142 12.75 15.75 12.4142 15.75 12C15.75 11.5858 15.4142 11.25 15 11.25H12.75V9Z"
                                            fill="#c0c5c0" />
                                    </svg>
                                    <p class="text-gray-400 ">Ajouter une carte</p>
                                </div>
                            </div>

                            <form *ngIf="activeFormId === list._id" #addCardForm="ngForm"
                                (ngSubmit)="onAddCard(addCardForm, list._id)">
                                <textarea required
                                    class="py-1 px-4 text-sm bg-gray-900 outline-none w-full mt-3 rounded-md text-slate-50"
                                    id="card" name="card" placeholder="Saisissez un titre pour cette carte"
                                    ngModel></textarea>
                                <div class="flex justify-start gap-x-3 items-center mt-3">

                                    <button class="py-2 px-6 bg-green-700 hover:bg-opacity-80 duration-500 text-slate-50 text-sm  rounded-md font-semibold" 
                                        type="submit">Ajouter une carte
                                    </button>
                                    <div class="rounded-md  hover:bg-opacity-80 cursor-pointer p-1"
                                        (click)="hideForm()">
                                        <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M19.207 6.207a1 1 0 0 0-1.414-1.414L12 10.586 6.207 4.793a1 1 0 0 0-1.414 1.414L10.586 12l-5.793 5.793a1 1 0 1 0 1.414 1.414L12 13.414l5.793 5.793a1 1 0 0 0 1.414-1.414L13.414 12l5.793-5.793z"
                                                fill="#FFF" />
                                        </svg>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
 

            <!-- liste a afficher -->
            <div class="  gap-x-5 max-w-[100%] flex-wrap justify-center sm:justify-start gap-y-5  ">

                <div
                    class="relative   min-w-[250px]   max-w-[250px] flex-wrap p-3 rounded-lg shadow bg-gray-800 border-gray-700 cursor-pointer hover:bg-opacity-70 transition-all duration-500 z-10 ">


                    <div (click)="showAddListForm()" *ngIf="!showFormAddList"
                        class="cursor-pointer flex justify-start items-center gap-x-2">
                        <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12.75 9C12.75 8.58579 12.4142 8.25 12 8.25C11.5858 8.25 11.25 8.58579 11.25 9L11.25 11.25H9C8.58579 11.25 8.25 11.5858 8.25 12C8.25 12.4142 8.58579 12.75 9 12.75H11.25V15C11.25 15.4142 11.5858 15.75 12 15.75C12.4142 15.75 12.75 15.4142 12.75 15L12.75 12.75H15C15.4142 12.75 15.75 12.4142 15.75 12C15.75 11.5858 15.4142 11.25 15 11.25H12.75V9Z"
                                fill="rgb(191 219 254)" />
                        </svg>
                        <p class="text-blue-200 ">Ajouter une Liste</p>
                    </div>



                    <div *ngIf="showFormAddList">
                        <form #AddListForm="ngForm" (ngSubmit)="addList(AddListForm)">
                            <input required
                                class="py-2 px-4 text-sm bg-gray-900 outline-none w-full rounded-md text-slate-50 "
                                type="text" id="liste" name="title" placeholder="Saisissez le nom de la liste"
                                ngModel />
                            <div class="flex justify-start items-center mt-3">
                                <button
                                    class=" py-2 px-6 bg-blue-600  text-slate-50 text-sm rounded-md font-semibold hover:bg-opacity-80 transition-all duration-500 z-10"
                                    type="submit">Ajouter une liste </button>


                                <div class="rounded-md  hover:bg-opacity-80 cursor-pointer p-2"
                                    (click)="hideAddListForm()">
                                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M19.207 6.207a1 1 0 0 0-1.414-1.414L12 10.586 6.207 4.793a1 1 0 0 0-1.414 1.414L10.586 12l-5.793 5.793a1 1 0 1 0 1.414 1.414L12 13.414l5.793 5.793a1 1 0 0 0 1.414-1.414L13.414 12l5.793-5.793z"
                                            fill="#FFF" />
                                    </svg>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>