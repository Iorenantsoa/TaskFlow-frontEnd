<!-- Navbar -->
<nav class="fixed top-0 z-50 w-full border-b bg-gray-900 border-gray-700 ">
  <div class="px-3 py-3 lg:px-5 lg:pl-3">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <!-- Button for mobile menu -->
        <button (click)="onShowMenu()"
          class="p-2 text-sm rounded-lg sm:hidden focus:outline-none text-gray-400 hover:bg-gray-700">
          <span class="sr-only">Open sidebar</span>
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path clip-rule="evenodd" fill-rule="evenodd"
              d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z" />
          </svg>
        </button>
        <a routerLink="/" class="flex items-center ms-2 md:me-24">
          <img src="assets/logo1.png" class="h-10" alt="Logo" />
          <span class="self-center text-xl font-semibold text-white">TaskFlow</span>
        </a>
      </div>

      <!-- User menu -->
      <div class="relative ms-3">
        <button (click)="onShowProfile()"
          class="flex bg-gray-800 rounded-full text-sm focus:ring-4 focus:ring-gray-600">
          <img class="w-8 h-8 rounded-full" src="assets/pdp.JPG" alt="user photo">
        </button>
        <div class="absolute right-0 mt-2 w-48 bg-gray-700 rounded shadow divide-y divide-gray-600" *ngIf="showProfile">
          <div class="px-4 py-3">
            <p class="text-sm text-white">{{user.username}}</p>
            <p class="text-sm font-medium text-gray-300">{{user.email}} </p>
          </div>
          <ul class="py-1">
            <li><a class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-600 cursor-pointer"
                (click)="onShowModalEditUser()">Modifier le profil</a></li>
            <li><a class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-600 cursor-pointer"
                (click)="onShowModalChangePassword()">Changer le mot de passe</a></li>
            <li><a class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-600 cursor-pointer" (click)="onLogOut()">
                Sign out</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

<div class="fixed inset-0 bg-black opacity-50 z-30 sm:hidden" *ngIf="showMenu" (click)="onHideMenu()"></div>

<!-- Sidebar -->
<aside [ngClass]="{'-translate-x-full': !showMenu, 'translate-x-0': showMenu}"
  class="fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform bg-gray-900 border-r border-gray-700 sm:translate-x-0">
  <div class="h-full px-3 pb-4 overflow-y-auto">
    <ul class="space-y-2 font-medium">
      <li class="cursor-pointer" (click)="onHideMenu()">
        <a routerLink="/dashboard" routerLinkActive="router-link-active"
          class="flex items-center p-2 text-white hover:bg-gray-700 rounded-lg">
          <svg class="w-5 h-5 text-gray-400 group-hover:text-white" fill="currentColor" viewBox="0 0 22 21"
            aria-hidden="true">
            <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z" />
            <path
              d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z" />
          </svg>
          <span class="ms-3">Dashboard</span>
        </a>
      </li>
      <li class="cursor-pointer" (click)="onHideMenu()">
        <a routerLink="/boards" routerLinkActive="router-link-active"
          class="flex items-center p-2 text-white hover:bg-gray-700 rounded-lg">
          <svg class="w-5 h-5 text-gray-400 group-hover:text-white" fill="currentColor" viewBox="0 0 18 18">
            <path
              d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z" />
          </svg>
          <span class="ms-3">Tableaux </span>
        </a>
      </li>

      <li class="cursor-pointer">
        <button type="button" (click)="onShowRecent()"
          class="flex items-center w-full p-2 text-base transition duration-75 rounded-lg group  text-white hover:bg-gray-700"
          aria-controls="dropdown-example" data-collapse-toggle="dropdown-example">



          <svg fill="rgb(156 163 175)" viewBox="0 0 24 24" id="Outline" xmlns="http://www.w3.org/2000/svg"
            class="flex-shrink-0 w-5 h-5  transition duration-75  text-gray-400 group-hover:text-white">
            <title>194 restore</title>
            <path
              d="M12,6a1,1,0,0,0-1,1v5a1,1,0,0,0,.293.707l3,3a1,1,0,0,0,1.414-1.414L13,11.586V7A1,1,0,0,0,12,6Z
            M23.812,10.132A12,12,0,0,0,3.578,3.415V1a1,1,0,0,0-2,0V5a2,2,0,0,0,2,2h4a1,1,0,0,0,0-2H4.827a9.99,9.99,0,1,1-2.835,7.878A.982.982,0,0,0,1,12a1.007,1.007,0,0,0-1,1.1,12,12,0,1,0,23.808-2.969Z" />
          </svg>
          <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">Récent</span>
          <svg class="w-3 h-3 transition-all duration-300" [ngClass]="{'-rotate-90': showRecent}" aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="m1 1 4 4 4-4" />
          </svg>
        </button>
        <ul id="dropdown-example" class="py-2 space-y-2   " [ngClass]="{'hidden ': showRecent}">
          <li>
            <a routerLink="/recent-project" routerLinkActive="router-link-active"
              class="flex items-center w-full p-2  transition duration-75 rounded-lg pl-11 group  text-white hover:bg-gray-700">Products</a>
          </li>
          <li>
            <a routerLink="/recent-project" routerLinkActive="router-link-active"
              class="flex items-center w-full p-2  transition duration-75 rounded-lg pl-11 group  text-white hover:bg-gray-700">Billing</a>
          </li>
          <li>
            <a routerLink="/recent-project" routerLinkActive="router-link-active"
              class="flex items-center w-full p-2  transition duration-75 rounded-lg pl-11 group bg-gray-100 text-white hover:bg-gray-700">Invoice</a>
          </li>
        </ul>
      </li>

      <li class="cursor-pointer">
        <button type="button" (click)="onShowFavory()"
          class="flex items-center w-full p-2 text-base  transition duration-75 rounded-lg group  text-white hover:bg-gray-700"
          aria-controls="dropdown-example" data-collapse-toggle="dropdown-example">
          <svg fill="rgb(156 163 175)" height="800px" width="800px" id="XMLID_298_" xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
            class="flex-shrink-0 w-5 h-5  transition duration-75  text-gray-400 group-hover:text-white">
            <g id="favorite">
              <path d="M12,23.2l-0.6-0.5C8.7,20.7,0,13.5,0,7.3C0,3.8,2.9,1,6.5,1c2.2,0,4.3,1.1,5.5,2.9l0,0l0,0C13.2,2.1,15.3,1,17.5,1
		C21.1,1,24,3.8,24,7.3c0,6.3-8.7,13.4-11.4,15.5L12,23.2z M6.5,2.9C4,2.9,2,4.8,2,7.2c0,4.1,5.1,9.5,10,13.4
		c4.9-3.9,10-9.3,10-13.4c0-2.4-2-4.3-4.5-4.3c-1.6,0-3,0.8-3.8,2L12,7.6L10.3,5C9.5,3.7,8.1,2.9,6.5,2.9z" />
            </g>
          </svg>
          <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">Favoris</span>
          <svg class="w-3 h-3 transition-all duration-300" [ngClass]="{'-rotate-90': showFavory}" aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="m1 1 4 4 4-4" />
          </svg>
        </button>
        <ul id="dropdown-example" class="py-2 space-y-2" [ngClass]="{'hidden ': showFavory}">
          <li>
            <a routerLink="/favoris-project" routerLinkActive="router-link-active"
              class="flex items-center w-full p-2  transition duration-75 rounded-lg pl-11 group  text-white hover:bg-gray-700">Favorie
              1</a>
          </li>
          <li>
            <a routerLink="/favoris-project" routerLinkActive="router-link-active"
              class="flex items-center w-full p-2  transition duration-75 rounded-lg pl-11 group text-white hover:bg-gray-700">Favorie
              2</a>
          </li>
          <li>
            <a routerLink="/favoris-project" routerLinkActive="router-link-active"
              class="flex items-center w-full p-2  transition duration-75 rounded-lg pl-11 group  text-white hover:bg-gray-700">Favorie
              3</a>
          </li>
        </ul>
      </li>


      <button (click)="openModal()"
        class="bg-blue-700 text-white font-semibold w-full py-3 rounded-md hover:bg-opacity-50 transition-all duration-500 flex justify-center items-center ">
        <svg class="w-5 h-5 text-slate-50 " viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M3.75 4.5L4.5 3.75H10.5L11.25 4.5V10.5L10.5 11.25H4.5L3.75 10.5V4.5ZM5.25 5.25V9.75H9.75V5.25H5.25ZM13.5 3.75L12.75 4.5V10.5L13.5 11.25H19.5L20.25 10.5V4.5L19.5 3.75H13.5ZM14.25 9.75V5.25H18.75V9.75H14.25ZM17.25 20.25H15.75V17.25H12.75V15.75H15.75V12.75H17.25V15.75H20.25V17.25H17.25V20.25ZM4.5 12.75L3.75 13.5V19.5L4.5 20.25H10.5L11.25 19.5V13.5L10.5 12.75H4.5ZM5.25 18.75V14.25H9.75V18.75H5.25Z"
            fill="#FFFFFF" />
        </svg>
        Créer un tableau
      </button>
    </ul>
  </div>
</aside>


<!-- Add new board -->
<div *ngIf="isOpen"
  class="fixed flex justify-center items-start inset-0 bg-gray-800 bg-opacity-80  overflow-y-auto h-full w-full z-50 transition-all duration-500 "
  id="my-modal">
  <div class="relative p-4 w-full max-w-md max-h-full m-y-5">
    <!-- Modal content -->
    <div class="relative rounded-lg shadow bg-gray-900">
      <!-- Modal header -->
      <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-600">
        <h3 class="text-lg font-semibold  text-white">
          Créer un nouveau tableau
        </h3>
        <button type="button" (click)="onCloseModal()"
          class="text-gray-400 bg-transparent   rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center hover:bg-gray-600 hover:text-white"
          data-modal-toggle="crud-modal">
          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
          </svg>
          <span class="sr-only bg-red-500">Close modal</span>
        </button>
      </div>
      <!-- Modal body -->
      <form class="p-4 md:p-5" #formulaire="ngForm" (ngSubmit)="onAddBoard(formulaire)">
        <div class="grid gap-4 mb-4 grid-cols-2">
          <div class="col-span-2">
            <label for="name" class="block mb-2 text-sm  sm:text-lg font-medium text-white">Name</label>
            <input #nameInput="ngModel" required type="text" name="name" id="name" [(ngModel)]="nameNewBoard"
              class="border   text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 outline-none bg-gray-800 border-none placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500  "
              placeholder="Nom du tableau" required="">
          </div>
        </div>
        <button type="submit" [disabled]="formulaire.invalid"
          class="text-white inline-flex items-center mt-2 focus:ring-4 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800">
          <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
              d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
              clip-rule="evenodd"></path>
          </svg>
          Créer le tableau
        </button>
      </form>
    </div>
  </div>
</div>
<!--  -->






<!-- Edit user -->
<div *ngIf="isModalEditUserIsOpen"
  class="fixed flex justify-center items-start inset-0 bg-gray-800 bg-opacity-80  overflow-y-auto h-full w-full z-50 transition-all duration-500 "
  id="my-modal">
  <div class="relative p-4 w-full max-w-md max-h-full m-y-5">
    <!-- Modal content -->
    <div class="relative rounded-lg shadow bg-gray-900">
      <!-- Modal header -->
      <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-600">
        <h3 class="text-lg font-semibold  text-white">
          Modifier le profil
        </h3>
        <button type="button" (click)="onHideModalEditUser()"
          class="text-gray-400 bg-transparent   rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center hover:bg-gray-600 hover:text-white"
          data-modal-toggle="crud-modal">
          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
          </svg>
          <span class="sr-only bg-red-500">Close modal</span>
        </button>
      </div>
      <!-- Modal body -->
      <form class="p-4 md:p-5" #editFormulaire ="ngForm" (ngSubmit)="onEditUser(editFormulaire)">
        <div class="grid gap-4 mb-4 grid-cols-2">
          <div class="col-span-2">
            <label for="username" class="block mb-2 text-sm  sm:text-lg font-medium text-white">username</label>
            <input  required #usernameInput="ngModel" required type="text" name="username" id="username" [(ngModel)]="editUsername" 
              class="border   text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 outline-none bg-gray-800 border-none placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500  "
              placeholder="Username" required="">
          </div>
          <div class="col-span-2">
            <label for="email" class="block mb-2 text-sm  sm:text-lg font-medium text-white" >Email</label>
            <input #emailInput="ngModel" required type="text" name="email" id="email" [(ngModel)]="editEmail"  email
              class="border   text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 outline-none bg-gray-800 border-none placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500  "
              placeholder="exemple@exemple.com" required="">
          </div>
        </div>
        <button type="submit" 
          class="text-white inline-flex items-center mt-2 font-semibold focus:ring-4 focus:outline-none   rounded-lg text-sm px-5 py-2.5 text-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800">

          Soumettre la modification
        </button>
      </form>
    </div>
  </div>
</div>
<!--  -->


















<!-- change Password -->
<div *ngIf="isModalChangePasswordIsOpen"
  class="fixed flex justify-center items-start inset-0 bg-gray-800 bg-opacity-80  overflow-y-auto h-full w-full z-50 transition-all duration-500 "
  id="my-modal">
  <div class="relative p-4 w-full max-w-md max-h-full m-y-5">
    <!-- Modal content -->
    <div class="relative rounded-lg shadow bg-gray-900">
      <!-- Modal header -->
      <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-600">
        <h3 class="text-lg font-semibold  text-white">
          Changer le mot de passe
        </h3>
        <button type="button" (click)="onHideModalChangePassowrd()"
          class="text-gray-400 bg-transparent   rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center hover:bg-gray-600 hover:text-white"
          data-modal-toggle="crud-modal">
          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
          </svg>
          <span class="sr-only bg-red-500">Close modal</span>
        </button>
      </div>
      <!-- Modal body -->
      <form class="p-4 md:p-5" #changePasswordForm="ngForm" (ngSubmit)="onChangePassword(changePasswordForm)">
        <div class="grid gap-4 mb-4 grid-cols-2">
          <div class="col-span-2">
            <label for="oldPassword" class="block mb-2 text-sm  sm:text-lg font-medium text-white">Ancien mot de
              passe</label>
            <input #oldPasswordInput="ngModel" required type="password" name="oldPassword" id="oldPassword"
              [(ngModel)]="oldPassword"
              class="border   text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 outline-none bg-gray-800 border-none placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500  "
              placeholder="Saisissez votre ancien mot de passe" required="">
          </div>
          <div class="col-span-2">
            <label for="newPassword" class="block mb-2 text-sm  sm:text-lg font-medium text-white">Nouveau mot de
              passe</label>
            <input #newPasswordInput="ngModel" required type="password" name="newPassword" id="newPassword"
              [(ngModel)]="newPassword"
              class="border   text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 outline-none bg-gray-800 border-none placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500  "
              placeholder="Saisissez votre nouveau mot de passe" required="">
          </div>
        </div>
        <button type="submit"
          class="text-white inline-flex items-center mt-2 focus:ring-4 focus:outline-none  font-semibold rounded-lg text-sm px-5 py-2.5 text-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800">

          Enregistrer la modification
        </button>
      </form>
    </div>
  </div>
</div>

<!--  -->